<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:head>
        <title>Cadastro</title>
    </h:head>
    <h:body>
        <h:form id="entrada">
            <p:panelGrid columns="2">
          
            
                <h:outputLabel for="Nome" value="Nome"></h:outputLabel>
                <p:inputText id="nome" value="#{controller.nome}" required="true" requiredMessage="Adicionar nome"></p:inputText>
                <h:outputLabel for="cpf" value="CPF"></h:outputLabel>
                <p:inputText id="cpf" value="#{controller.cpf}"></p:inputText>
                <h:outputLabel for="telefone" value="Telefone"></h:outputLabel>
                <p:inputText id="telefone" value="#{controller.telefone}"></p:inputText>
                <h:outputLabel for="pais" value="País"></h:outputLabel>
                <p:inputText id="pais" value="#{controller.pais}"></p:inputText>
                <h:outputLabel for="estado" value="Estado"></h:outputLabel>
                <p:inputText id="estado" value="#{controller.estado}"></p:inputText>
                <h:outputLabel for="cidade" value="Cidade"></h:outputLabel>
                <p:inputText id="cidade" value="#{controller.cidade}"></p:inputText>
                <h:outputLabel for="bairro" value="Bairro"></h:outputLabel>
                <p:inputText id="bairro" value="#{controller.bairro}"></p:inputText>
                <h:outputLabel for="numero" value="Número"></h:outputLabel>
                <p:inputText id="numero" value="#{controller.numero}"></p:inputText>
                <h:outputLabel for="cep" value="Cep"></h:outputLabel>
                <p:inputText id="cep" value="#{controller.cep}"></p:inputText>
                <h:outputLabel id="imglab" for="imagem" value="imagem"></h:outputLabel>
                <p:inputText id="imagem" value="#{controller.imagem}"></p:inputText>
                <input type="file" onchange="previewFile()"></input><br></br>
                <img src="" height="200" alt="Image preview..."></img>
                
                <p:commandButton value="Enviar" action="#{controller.cadastro()}" update="return"></p:commandButton>
                <h:outputText id="return" value="#{controller.retorno}"></h:outputText>
               
        
            </p:panelGrid>
        </h:form>
    </h:body>
    
    <script>
   function previewFile(){
       var preview = document.querySelector('img'); //selects the query named img
       var file    = document.querySelector('input[type=file]').files[0]; //sames as here
       var reader  = new FileReader();

       reader.onloadend = function () {
           preview.src = reader.result;
           console.log(reader.result);
           document.getElementById("entrada:imagem").value=reader.result;
       }

       if (file) {
           reader.readAsDataURL(file); //reads the data as a URL
       } else {
           preview.src = "";
       }
  }
document.getElementById("entrada:imagem").style.display="none";
document.getElementById("entrada:imglab").style.display="none";
 //calls the function named previewFile()
  </script>
</html>

